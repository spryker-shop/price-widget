{% extends template('widget') %}

{% define data = {
    priceModes: _widget.priceModes | default([])
    currentPriceMode: _widget.currentPriceMode | default(null)
} %}

{% block template %}
    {% if data.priceModes is not empty %}
        {{parent()}}
    {% endif %}
{% endblock %}

{% block body %}
    <form method="GET" action="{{ path('price-mode-switch') }}" data-component="price-mode-switch">
        <select name="price-mode" onchange="this.form.submit()">
            {% for priceMode in data.priceModes %}
                <option value="{{ priceMode }}" {{ (priceMode == data.currentPriceMode) ? 'selected' : ''}}>{{ ('price.mode.' ~ priceMode | lower) | trans }}</option>
            {% endfor %}
        </select>
        <input type="hidden" name="referrer-url" value="{{ app.request.requestUri }}" />
    </form>
{% endblock %}
